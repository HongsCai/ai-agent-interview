<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI ç®€å†åˆ†æ</title>
    <style>
        /* æ ·å¼ä¿æŒä¸å˜ */
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #f4f4f9; display: flex; flex-direction: column; align-items: center; min-height: 100vh; margin: 0; padding: 20px; padding-bottom: 80px; }
        .container { background-color: #ffffff; padding: 30px; border-radius: 10px; box-shadow: 0 4px 8px rgba(0,0,0,0.1); width: 100%; max-width: 500px; box-sizing: border-box; }
        .header-bar { width: 100%; max-width: 500px; text-align: center; margin-bottom: 20px; }
        .header-title { font-size: 20px; color: #333; font-weight: bold; margin: 0; }

        .upload-area {
            border: 2px dashed #4a90e2; border-radius: 12px; background-color: #fcfcfc;
            padding: 40px 20px; text-align: center; cursor: pointer; transition: background-color 0.3s, border-color 0.3s;
            margin-bottom: 20px; position: relative;
        }
        .upload-area.drag-over { background-color: #eef6ff; border-color: #0056b3; }
        .folder-icon { font-size: 48px; margin-bottom: 10px; display: block; }
        .upload-title { font-size: 18px; font-weight: bold; color: #333; margin: 5px 0; }
        .upload-desc { font-size: 14px; color: #999; margin-bottom: 8px; }
        .upload-limit { font-size: 12px; color: #bbb; }

        .file-info { display: none; margin-top: 10px; padding: 10px; background: #eef5ff; border-radius: 5px; color: #007bff; font-size: 14px; word-break: break-all; }

        .input-group { margin-bottom: 20px; width: 100%; }
        .custom-input { width: 100%; padding: 14px; border: 1px solid #ddd; border-radius: 8px; font-size: 15px; box-sizing: border-box; background-color: #fafafa; outline: none; transition: border-color 0.3s; }
        .custom-input:focus { border-color: #007bff; background-color: #fff; }

        .analyze-btn { width: 100%; padding: 14px; background-color: #007bff; color: white; border: none; border-radius: 8px; font-size: 16px; font-weight: bold; cursor: pointer; box-shadow: 0 4px 6px rgba(0, 123, 255, 0.2); transition: background 0.3s; }
        .analyze-btn:hover { background-color: #0056b3; }
        .analyze-btn:disabled { background-color: #ccc; cursor: not-allowed; }

        .bottom-nav { position: fixed; bottom: 0; left: 0; width: 100%; height: 60px; background-color: #ffffff; display: flex; justify-content: space-around; align-items: center; box-shadow: 0 -2px 10px rgba(0,0,0,0.05); z-index: 1000; }
        .nav-item { flex: 1; text-align: center; color: #999; font-size: 12px; cursor: pointer; display: flex; flex-direction: column; justify-content: center; align-items: center; height: 100%; }
        .nav-item.active { color: #007bff; }
        .nav-icon { font-size: 20px; margin-bottom: 3px; }
    </style>
</head>
<body>

    <div class="header-bar">
        <h2 class="header-title">AI ç®€å†åˆ†æ</h2>
    </div>

    <div class="container">
        <form id="analysisForm" action="/resume/" method="POST" enctype="multipart/form-data">

            <input type="file" id="fileInput" name="resume" accept=".pdf" style="display: none;" required>

            <div class="upload-area" id="dropArea">
                <span class="folder-icon">ğŸ“‚</span>
                <div id="upload-prompt">
                    <div class="upload-title">â¬†ï¸ ä¸Šä¼ ç®€å†</div>
                    <div class="upload-desc">(æ‹–æ‹½æ–‡ä»¶è‡³æ­¤æˆ–ç‚¹å‡»ä¸Šä¼ )</div>
                    <div class="upload-limit">æ”¯æŒæ ¼å¼ï¼šPDF, æœ€å¤§20MB</div>
                </div>
                <div id="file-display" class="file-info">
                    ğŸ“„ <span id="filename-text"></span>
                </div>
            </div>

            <div class="input-group">
                <input type="text" id="targetPosition" name="position" class="custom-input" placeholder="è¯·è¾“å…¥æ‚¨è¦åŒ¹é…çš„å²—ä½ (ä¾‹å¦‚: Javaé«˜çº§å¼€å‘)" required>
            </div>

            <button type="submit" id="analyzeBtn" class="analyze-btn">å¼€å§‹æ™ºèƒ½åˆ†æ</button>
        </form>
    </div>

    <nav class="bottom-nav">
        <div class="nav-item" onclick="location.href='/job/'">
            <span class="nav-icon">ğŸ”</span>
            <span>å·¥ä½œæ£€ç´¢</span>
        </div>
        <div class="nav-item" onclick="location.href='/resume/'">
            <span class="nav-icon">ğŸ“‹</span>
            <span>AIç®€å†åˆ†æ</span>
        </div>
        <div class="nav-item active" onclick="location.href='/interview/'">
            <span class="nav-icon">ğŸ¤–</span>
            <span>AIé¢è¯•</span>
        </div>
    </nav>

    <script>
        const dropArea = document.getElementById('dropArea');
        const fileInput = document.getElementById('fileInput');
        const fileDisplay = document.getElementById('file-display');
        const filenameText = document.getElementById('filename-text');
        const uploadPrompt = document.getElementById('upload-prompt');
        const form = document.getElementById('analysisForm');
        const analyzeBtn = document.getElementById('analyzeBtn');

        // 1. ç‚¹å‡»åŒºåŸŸ -> è§¦å‘æ–‡ä»¶é€‰æ‹©
        dropArea.addEventListener('click', () => fileInput.click());

        // 2. ç›‘å¬æ–‡ä»¶é€‰æ‹©å˜åŒ–
        fileInput.addEventListener('change', function() {
            if (this.files.length > 0) updateFileUI(this.files[0]);
        });

        // 3. æ‹–æ‹½é«˜äº®æ•ˆæœ
        ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
            dropArea.addEventListener(eventName, (e) => {
                e.preventDefault();
                e.stopPropagation();
            }, false);
        });

        ['dragenter', 'dragover'].forEach(eventName => {
            dropArea.addEventListener(eventName, () => dropArea.classList.add('drag-over'), false);
        });

        ['dragleave', 'drop'].forEach(eventName => {
            dropArea.addEventListener(eventName, () => dropArea.classList.remove('drag-over'), false);
        });

        // 4. å¤„ç†æ–‡ä»¶æ”¾ä¸‹ (æ ¸å¿ƒï¼šæŠŠæ‹–æ‹½çš„æ–‡ä»¶ç»™åˆ° input)
        dropArea.addEventListener('drop', (e) => {
            const dt = e.dataTransfer;
            const files = dt.files;
            if (files.length > 0) {
                fileInput.files = files;
                updateFileUI(files[0]);
            }
        });

        function updateFileUI(file) {
            if (file.type !== 'application/pdf') {
                alert('è¯·ä¸Šä¼  PDF æ ¼å¼çš„æ–‡ä»¶');
                fileInput.value = '';
                return;
            }
            filenameText.textContent = file.name;
            fileDisplay.style.display = 'block';
            uploadPrompt.style.opacity = '0.5';
        }

        // 5. è¡¨å•æäº¤æ—¶çš„åŠ è½½åŠ¨ç”»
        form.addEventListener('submit', function(e) {
            if (fileInput.files.length === 0) {
                e.preventDefault();
                alert('è¯·å…ˆä¸Šä¼ ç®€å† PDF');
                return;
            }
            // æŒ‰é’®å˜è‰²ï¼Œæç¤ºç”¨æˆ·
            analyzeBtn.textContent = 'åˆ†æç”Ÿæˆä¸­...';
            analyzeBtn.disabled = true;
            // ä¸éœ€è¦å†™ fetch ä»£ç ï¼Œè¡¨å•ä¼šè‡ªåŠ¨è·³è½¬ï¼
        });
    </script>
</body>
</html>